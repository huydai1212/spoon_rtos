/*******************************************************************************
** @file:      	mDelay.c
** @author:    	HUY DAI
** @version:   	V1.0.0
** @time:      	9:17 AM Monday, October 14, 2019
** @brief:		 
** @revision:
**             	- version 1.0.1: <date> <name>
**             	<discribe the change>
*******************************************************************************/

/*******************************************************************************
**                               INCLUDES
*******************************************************************************/
#include "mDelay.h"
#include "stdint.h"
#include "cmn.h"
/*******************************************************************************
**                       INTERNAL MACRO DEFINITIONS
*******************************************************************************/

/*******************************************************************************
**                      COMMON VARIABLE DEFINITIONS
*******************************************************************************/

/*******************************************************************************
**                      INTERNAL VARIABLE DEFINITIONS
*******************************************************************************/
static uint32_t oneTick = 0;
/*******************************************************************************
**                      INTERNAL FUNCTION PROTOTYPES
*******************************************************************************/

/*******************************************************************************
**                           FUNCTION DEFINITIONS
*******************************************************************************/

/*
** @brief		
** @param		
** @return		None
** @time		9:19 AM Monday, October 14, 2019
** @revision	
**             
*/
void delayInit(void)
{
    oneTick = HAL_RCC_GetHCLKFreq()/1000;
}

/*
** @brief		delay su dong trong ngat;
** @param		
** @return		None
** @time		9:19 AM Monday, October 14, 2019
** @revision	
**             
*/
void delay_msIsUsedInterrupt(uint32_t ms)
{
    uint32_t tmp = oneTick/4;
    while(ms)
    {
        while(--tmp);
        tmp = oneTick/4;
        --ms;
    }
}

/*
** @brief       get tick clock;
** @param
** @return      None
** @time        9:19 AM Monday, October 14, 2019
** @revision
**
*/
uint32_t getTick_ms(void)
{
    return HAL_GetTick();
}

/******************************** End of file **********************************/
