/*******************************************************************************
** @file:      	crc.C
** @author:    	HUY DAI
** @version:   	V1.0.0
** @time:      	10:13 AM Friday, May 31, 2019
** @brief:		 
** @revision:
**             	- version 1.0.1: <date> <name>
**             	<discribe the change>
*******************************************************************************/

/*******************************************************************************
**                               INCLUDES
*******************************************************************************/
#include "crc.h"
#include "cmn.h"
/*******************************************************************************
**                       INTERNAL MACRO DEFINITIONS
*******************************************************************************/

/*******************************************************************************
**                      COMMON VARIABLE DEFINITIONS
*******************************************************************************/

/*******************************************************************************
**                      INTERNAL VARIABLE DEFINITIONS
*******************************************************************************/

/*******************************************************************************
**                      INTERNAL FUNCTION PROTOTYPES
*******************************************************************************/

/*******************************************************************************
**                           FUNCTION DEFINITIONS
*******************************************************************************/

/*******************************************************************************
** @brief		NOT(dat1 + data2 +...) flow hexfile intel
** @param		data, length of data
** @return		crc
** @time		10:24 AM Friday, May 31, 2019
** @revision	
**             
*******************************************************************************/
uint8_t crcBasic(uint8_t *data, uint16_t length)
{
	uint32_t tmp = 0;
	uint16_t i = 0;
	uint8_t crc;
	for(i = 0; i < length; ++i)
	{
		tmp += data[i];
	}	
    tmp = ~tmp;
	crc = (uint8_t)tmp;
	return crc;
}

/*******************************************************************************
** @brief		crc = 01h + NOT(dat1 + data2 +...) flow hexfile intel
** @param		data, length of data
** @return		crc
** @time		10:24 AM Friday, May 31, 2019
** @revision	
**             
*******************************************************************************/
uint8_t crcHexFileIntel(uint8_t *data, uint16_t length)
{
	uint32_t tmp = 0;
	uint16_t i = 0;
	uint8_t crc;
	for(i = 0; i < length; ++i)
	{
		tmp += data[i];
	}	
    tmp = ~tmp;
	crc = (uint8_t)(tmp + 1);
	return crc;
}

/*******************************************************************************
** @brief		crc = (dat1 Xor data2 Xor...) flow NMEA sentences
** @param		data, length of data
** @return		crc
** @time		4:00 PM Thursday, July 25, 2019
** @revision	
**             
*******************************************************************************/
uint8_t crcXorByte(uint8_t *data, uint16_t length)
{
    uint8_t retCRC = data[0];
    uint16_t i = 0;
    for(i = 1; i < length; ++i)
    {
        retCRC ^= data[i];
    }
    return retCRC;
}


/******************************** End of file **********************************/
